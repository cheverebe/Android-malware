.class public final Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;
.super Lcom/touchtype/keyboard/theme/painter/PopupPainter;
.source "MiniKeyboardPainter.java"


# instance fields
.field private final mKeyX:I

.field private final mKeyY:I

.field private final mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;


# direct methods
.method public constructor <init>(Landroid/graphics/drawable/Drawable;IIILcom/touchtype/keyboard/MiniKeyboard;)V
    .locals 0
    .parameter "background"
    .parameter "animation"
    .parameter "x"
    .parameter "y"
    .parameter "keyboard"

    .prologue
    .line 21
    invoke-direct {p0, p1, p2}, Lcom/touchtype/keyboard/theme/painter/PopupPainter;-><init>(Landroid/graphics/drawable/Drawable;I)V

    .line 22
    iput p3, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyX:I

    .line 23
    iput p4, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyY:I

    .line 24
    iput-object p5, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    .line 25
    return-void
.end method


# virtual methods
.method public paint(Lcom/touchtype/keyboard/view/PreviewPopup;)Lcom/touchtype/keyboard/view/PreviewPopup;
    .locals 11
    .parameter "popup"

    .prologue
    const/high16 v10, -0x8000

    const/4 v9, 0x0

    .line 28
    new-instance v0, Landroid/graphics/Rect;

    invoke-virtual {p1}, Lcom/touchtype/keyboard/view/PreviewPopup;->getParent()Lcom/touchtype/keyboard/view/MainKeyboardView;

    move-result-object v6

    invoke-virtual {v6}, Lcom/touchtype/keyboard/view/MainKeyboardView;->getWidth()I

    move-result v6

    invoke-virtual {p1}, Lcom/touchtype/keyboard/view/PreviewPopup;->getParent()Lcom/touchtype/keyboard/view/MainKeyboardView;

    move-result-object v7

    invoke-virtual {v7}, Lcom/touchtype/keyboard/view/MainKeyboardView;->getHeight()I

    move-result v7

    invoke-direct {v0, v9, v9, v6, v7}, Landroid/graphics/Rect;-><init>(IIII)V

    .line 29
    .local v0, bounds:Landroid/graphics/Rect;
    iget-object v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    iget v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyX:I

    iget v8, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyY:I

    invoke-virtual {v6, v0, v7, v8}, Lcom/touchtype/keyboard/MiniKeyboard;->order(Landroid/graphics/Rect;II)V

    .line 31
    iget v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyX:I

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getOwningArea()Lcom/touchtype/keyboard/key/KeyArea;

    move-result-object v7

    iget-object v7, v7, Lcom/touchtype/keyboard/key/KeyArea;->mDrawBounds:Landroid/graphics/Rect;

    invoke-virtual {v7}, Landroid/graphics/Rect;->width()I

    move-result v7

    div-int/lit8 v7, v7, 0x2

    add-int/2addr v6, v7

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getCentralX()I

    move-result v7

    sub-int v2, v6, v7

    .line 32
    .local v2, left:I
    iget v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyY:I

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getOwningArea()Lcom/touchtype/keyboard/key/KeyArea;

    move-result-object v7

    iget-object v7, v7, Lcom/touchtype/keyboard/key/KeyArea;->mDrawBounds:Landroid/graphics/Rect;

    invoke-virtual {v7}, Landroid/graphics/Rect;->height()I

    move-result v7

    sub-int/2addr v6, v7

    invoke-virtual {p0}, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->getVerticalPadding()I

    move-result v7

    div-int/lit8 v7, v7, 0x2

    sub-int/2addr v6, v7

    .line 33
    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getPrimaryKey()Lcom/touchtype/keyboard/key/Key;

    move-result-object v7

    invoke-virtual {v7}, Lcom/touchtype/keyboard/key/Key;->getArea()Lcom/touchtype/keyboard/key/KeyArea;

    move-result-object v7

    iget-object v7, v7, Lcom/touchtype/keyboard/key/KeyArea;->mDrawBounds:Landroid/graphics/Rect;

    iget v7, v7, Landroid/graphics/Rect;->top:I

    sub-int v5, v6, v7

    .line 34
    .local v5, top:I
    invoke-virtual {p1, v9}, Lcom/touchtype/keyboard/view/PreviewPopup;->setClippingEnabled(Z)V

    .line 36
    new-instance v6, Landroid/graphics/Rect;

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getWidth()I

    move-result v7

    add-int/2addr v7, v2

    iget-object v8, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v8}, Lcom/touchtype/keyboard/MiniKeyboard;->getHeight()I

    move-result v8

    add-int/2addr v8, v5

    invoke-direct {v6, v2, v5, v7, v8}, Landroid/graphics/Rect;-><init>(IIII)V

    invoke-virtual {p0}, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->getPadding()Landroid/graphics/Rect;

    move-result-object v7

    invoke-static {v6, v7}, Lcom/touchtype/keyboard/theme/util/RectUtil;->expandToPad(Landroid/graphics/Rect;Landroid/graphics/Rect;)Landroid/graphics/Rect;

    move-result-object v6

    iput-object v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mLocation:Landroid/graphics/Rect;

    .line 37
    invoke-super {p0, p1}, Lcom/touchtype/keyboard/theme/painter/PopupPainter;->paint(Lcom/touchtype/keyboard/view/PreviewPopup;)Lcom/touchtype/keyboard/view/PreviewPopup;

    .line 39
    iget-object v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v6}, Lcom/touchtype/keyboard/MiniKeyboard;->getOwningArea()Lcom/touchtype/keyboard/key/KeyArea;

    move-result-object v6

    iget-object v3, v6, Lcom/touchtype/keyboard/key/KeyArea;->mDrawBounds:Landroid/graphics/Rect;

    .line 40
    .local v3, owningBounds:Landroid/graphics/Rect;
    invoke-virtual {p1}, Lcom/touchtype/keyboard/view/PreviewPopup;->getParent()Lcom/touchtype/keyboard/view/MainKeyboardView;

    move-result-object v6

    invoke-virtual {v6}, Lcom/touchtype/keyboard/view/MainKeyboardView;->getKeyboard()Lcom/touchtype/keyboard/MainKeyboard;

    move-result-object v6

    invoke-virtual {v3}, Landroid/graphics/Rect;->centerX()I

    move-result v7

    invoke-virtual {v3}, Landroid/graphics/Rect;->centerY()I

    move-result v8

    invoke-virtual {v6, v7, v8}, Lcom/touchtype/keyboard/MainKeyboard;->getKeyAt(II)Lcom/touchtype/keyboard/key/Key;

    move-result-object v4

    .line 43
    .local v4, owningKey:Lcom/touchtype/keyboard/key/Key;
    new-instance v1, Lcom/touchtype/keyboard/view/MiniKeyboardView;

    invoke-virtual {p1}, Lcom/touchtype/keyboard/view/PreviewPopup;->getContext()Landroid/content/Context;

    move-result-object v6

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {p1}, Lcom/touchtype/keyboard/view/PreviewPopup;->getParent()Lcom/touchtype/keyboard/view/MainKeyboardView;

    move-result-object v8

    invoke-direct {v1, v6, v7, v4, v8}, Lcom/touchtype/keyboard/view/MiniKeyboardView;-><init>(Landroid/content/Context;Lcom/touchtype/keyboard/MiniKeyboard;Lcom/touchtype/keyboard/key/Key;Lcom/touchtype/keyboard/view/MainKeyboardView;)V

    .line 45
    .local v1, content:Lcom/touchtype/keyboard/view/MiniKeyboardView;
    iget-object v6, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v6}, Lcom/touchtype/keyboard/MiniKeyboard;->getWidth()I

    move-result v6

    invoke-static {v6, v10}, Landroid/view/View$MeasureSpec;->makeMeasureSpec(II)I

    move-result v6

    iget-object v7, p0, Lcom/touchtype/keyboard/theme/painter/MiniKeyboardPainter;->mKeyboard:Lcom/touchtype/keyboard/MiniKeyboard;

    invoke-virtual {v7}, Lcom/touchtype/keyboard/MiniKeyboard;->getHeight()I

    move-result v7

    invoke-static {v7, v10}, Landroid/view/View$MeasureSpec;->makeMeasureSpec(II)I

    move-result v7

    invoke-virtual {v1, v6, v7}, Lcom/touchtype/keyboard/view/MiniKeyboardView;->measure(II)V

    .line 47
    const/4 v6, 0x1

    invoke-virtual {p1, v6}, Lcom/touchtype/keyboard/view/PreviewPopup;->setTouchable(Z)V

    .line 49
    invoke-virtual {p1, v1}, Lcom/touchtype/keyboard/view/PreviewPopup;->setContent(Landroid/view/View;)V

    .line 51
    return-object p1
.end method
